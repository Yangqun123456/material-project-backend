import{d as V,a1 as Z,P as O,c as D,o as b,a as j,t as I,h as $,n as E,f as e,ak as x,q as l,w as t,r as ee,e as R,E as ae,g as K,H as J,_ as Y,au as oe,M as te,u as se,k as g,O as le,K as ne,a2 as re,ac as ie,ab as G,T as de,av as ce,j as ue,s as A,x as P,l as me,aw as pe,ax as fe}from"./index-0TomTaJD.js";import{E as ge,a as _e,b as ve,_ as be,v as ye}from"./el-table-column-FusJ4aSb.js";import{_ as Ce}from"./PageContainer-dWsT3JHK.js";import"./el-checkbox-RrlRlQXz.js";import{F as he,d as Ee}from"./el-tooltip-0J6-uH9x.js";import{E as Q}from"./el-button-Gzshe2nf.js";import{d as we,a as ke,b as $e,c as Se,u as Re,m as Te,e as Me,f as q,w as De,g as Ie}from"./xlsx-ijiml1mK.js";import{u as Ae,a as Fe,b as Le,E as Be}from"./el-overlay-r7wmYU7d.js";import{E as Pe,a as Ve}from"./el-form-item-VWNGemcl.js";import{E as Ne}from"./el-input-rEbAz4Ct.js";import"./el-message-AtOy-s3d.js";import{c as ze}from"./refs-dAFGyu0n.js";import{b as H}from"./_plugin-vue_export-helper-JexHLYfG.js";import"./error-tBjRQryL.js";import"./isEqual-VZOgOHnl.js";import"./castArray-6Htw4tAl.js";import"./_baseClone-XddR6Gnl.js";const W=Symbol("dialogInjectionKey"),Ue=["aria-level"],je=["aria-label"],qe=["id"],Ke=V({name:"ElDialogContent"}),Oe=V({...Ke,props:we,emits:ke,setup(T){const r=T,{t:i}=Z(),{Close:d}=oe,{dialogRef:c,headerRef:n,bodyId:y,ns:s,style:v}=O(W),{focusTrapRef:w}=O(he),_=D(()=>[s.b(),s.is("fullscreen",r.fullscreen),s.is("draggable",r.draggable),s.is("align-center",r.alignCenter),{[s.m("center")]:r.center},r.customClass]),u=ze(w,c),k=D(()=>r.draggable);return Ae(c,n,k),(a,p)=>(b(),j("div",{ref:e(u),class:E(e(_)),style:J(e(v)),tabindex:"-1"},[I("header",{ref_key:"headerRef",ref:n,class:E(e(s).e("header"))},[$(a.$slots,"header",{},()=>[I("span",{role:"heading","aria-level":a.ariaLevel,class:E(e(s).e("title"))},x(a.title),11,Ue)]),a.showClose?(b(),j("button",{key:0,"aria-label":e(i)("el.dialog.close"),class:E(e(s).e("headerbtn")),type:"button",onClick:p[0]||(p[0]=m=>a.$emit("close"))},[l(e(ae),{class:E(e(s).e("close"))},{default:t(()=>[(b(),R(ee(a.closeIcon||e(d))))]),_:1},8,["class"])],10,je)):K("v-if",!0)],2),I("div",{id:e(y),class:E(e(s).e("body"))},[$(a.$slots,"default")],10,qe),a.$slots.footer?(b(),j("footer",{key:0,class:E(e(s).e("footer"))},[$(a.$slots,"footer")],2)):K("v-if",!0)],6))}});var He=Y(Oe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const Je=["aria-label","aria-labelledby","aria-describedby"],Ye=V({name:"ElDialog",inheritAttrs:!1}),Ge=V({...Ye,props:$e,emits:Se,setup(T,{expose:r}){const i=T,d=te();H({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},D(()=>!!d.title)),H({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},D(()=>!!i.customClass));const c=se("dialog"),n=g(),y=g(),s=g(),{visible:v,titleId:w,bodyId:_,style:u,overlayDialogStyle:k,rendered:a,zIndex:p,afterEnter:m,afterLeave:f,beforeLeave:C,handleClose:F,onModalClick:N,onOpenAutoFocus:z,onCloseAutoFocus:U,onCloseRequested:L,onFocusoutPrevented:B}=Re(i,n);le(W,{dialogRef:n,headerRef:y,bodyId:_,ns:c,rendered:a,style:u});const h=Le(N),X=D(()=>i.draggable&&!i.fullscreen);return r({visible:v,dialogContentRef:s}),(o,S)=>(b(),R(ce,{to:o.appendTo,disabled:o.appendTo!=="body"?!1:!o.appendToBody},[l(de,{name:"dialog-fade",onAfterEnter:e(m),onAfterLeave:e(f),onBeforeLeave:e(C),persisted:""},{default:t(()=>[G(l(e(Fe),{"custom-mask-event":"",mask:o.modal,"overlay-class":o.modalClass,"z-index":e(p)},{default:t(()=>[I("div",{role:"dialog","aria-modal":"true","aria-label":o.title||void 0,"aria-labelledby":o.title?void 0:e(w),"aria-describedby":e(_),class:E(`${e(c).namespace.value}-overlay-dialog`),style:J(e(k)),onClick:S[0]||(S[0]=(...M)=>e(h).onClick&&e(h).onClick(...M)),onMousedown:S[1]||(S[1]=(...M)=>e(h).onMousedown&&e(h).onMousedown(...M)),onMouseup:S[2]||(S[2]=(...M)=>e(h).onMouseup&&e(h).onMouseup(...M))},[l(e(Ee),{loop:"",trapped:e(v),"focus-start-el":"container",onFocusAfterTrapped:e(z),onFocusAfterReleased:e(U),onFocusoutPrevented:e(B),onReleaseRequested:e(L)},{default:t(()=>[e(a)?(b(),R(He,ne({key:0,ref_key:"dialogContentRef",ref:s},o.$attrs,{"custom-class":o.customClass,center:o.center,"align-center":o.alignCenter,"close-icon":o.closeIcon,draggable:e(X),fullscreen:o.fullscreen,"show-close":o.showClose,title:o.title,"aria-level":o.headerAriaLevel,onClose:e(F)}),re({header:t(()=>[o.$slots.title?$(o.$slots,"title",{key:1}):$(o.$slots,"header",{key:0,close:e(F),titleId:e(w),titleClass:e(c).e("title")})]),default:t(()=>[$(o.$slots,"default")]),_:2},[o.$slots.footer?{name:"footer",fn:t(()=>[$(o.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):K("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Je)]),_:3},8,["mask","overlay-class","z-index"]),[[ie,e(v)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}});var Qe=Y(Ge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const We=ue(Qe),Xe={class:"dialog-footer"},Ze={__name:"MaterialEdit",emits:["success"],setup(T,{expose:r,emit:i}){const d=g(!1),c=g(),n=g({new_material_id:""}),y={new_material_id:[{required:!0,message:"请输入哑铃编号",trigger:"blur"},{pattern:/^[^\s]{1,20}$/,message:"长度在 1 到 20 位非空字符",trigger:"blur"}]},s=i,v=async()=>{await c.value.validate(),n.value.material_id&&(await Te(n.value),P.success("编辑成功")),d.value=!1,s("success")};return r({open:_=>{d.value=!0,n.value={..._}}}),(_,u)=>{const k=Ne,a=Pe,p=Ve,m=Q,f=We;return b(),R(f,{modelValue:d.value,"onUpdate:modelValue":u[2]||(u[2]=C=>d.value=C),title:n.value.material_id?"编辑哑铃":"添加哑铃",width:"30%"},{footer:t(()=>[I("span",Xe,[l(m,{onClick:u[1]||(u[1]=C=>d.value=!1)},{default:t(()=>[A("取消")]),_:1}),l(m,{type:"primary",onClick:v},{default:t(()=>[A(" 确认 ")]),_:1})])]),default:t(()=>[l(p,{ref_key:"formRef",ref:c,model:n.value,rules:y,"label-width":"100px",style:{"padding-right":"30px"}},{default:t(()=>[l(a,{label:"哑铃编号",prop:"new_material_id"},{default:t(()=>[l(k,{modelValue:n.value.new_material_id,"onUpdate:modelValue":u[0]||(u[0]=C=>n.value.new_material_id=C),placeholder:"请输入哑铃编号"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}},_a={__name:"materialManage",setup(T){const r=me(),i=g([]),d=g(1),c=g(8),n=g(!1),y=g(),s=async()=>{n.value=!0;const a=await Me();i.value=a.data.data||[],n.value=!1};s();const v=()=>{const a=i.value.map(f=>({哑铃编号:f.material_id,记录数量:f.count})),p=q.json_to_sheet(a),m=q.book_new();q.book_append_sheet(m,p,"Sheet1"),De(m,"materialManage.xlsx")},w=a=>{r.user.identity==="administrator"?y.value.open(a):P.warning("您不是管理员，无法编辑哑铃")},_=async a=>{r.user.identity==="administrator"?(await Be.confirm("你确认要删除该哑铃么","温馨提示",{type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"}),await Ie(a.material_id),P.success("删除成功"),s()):P.warning("您不是管理员，无法删除哑铃")},u=()=>{s()},k=(a,p)=>{d.value=a,c.value=p};return(a,p)=>{const m=Q,f=ge,C=_e,F=ve,N=be,z=Ce,U=ye;return b(),R(z,{title:"哑铃管理"},{extra:t(()=>[l(m,{type:"primary",onClick:v},{default:t(()=>[A("导出表格")]),_:1})]),default:t(()=>[G((b(),R(F,{data:i.value.slice((d.value-1)*c.value,d.value*c.value),style:{width:"100%",height:"100%"}},{empty:t(()=>[l(C,{description:"暂无数据"})]),default:t(()=>[l(f,{label:"序号",width:"100",type:"index"}),l(f,{prop:"material_id",label:"哑铃编号"}),l(f,{prop:"count",label:"记录数量"}),l(f,{label:"操作",width:"200"},{default:t(({row:L,$index:B})=>[l(m,{type:"primary",icon:e(pe),onClick:h=>w(L,B),plain:"",round:""},{default:t(()=>[A("编辑")]),_:2},1032,["icon","onClick"]),l(m,{type:"danger",icon:e(fe),onClick:h=>_(L,B),plain:"",round:""},{default:t(()=>[A("删除")]),_:2},1032,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[U,n.value]]),l(N,{total:i.value.length,onPaginationChanged:k},null,8,["total"]),l(Ze,{ref_key:"dialog",ref:y,onSuccess:u},null,512)]),_:1})}}};export{_a as default};
