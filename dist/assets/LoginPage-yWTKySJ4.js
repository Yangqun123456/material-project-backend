import{b as z,i as R,d as M,u as T,c as F,o as d,a as I,e as _,w as s,r as j,f as i,E as A,g as y,n as h,h as $,_ as D,j as K,k as b,l as G,m as H,p as J,q as a,s as m,t as E,v as O,x as U,y as Q,z as B,A as V,B as W,C as X}from"./index-RwwahC4L.js";import{E as Y,a as Z}from"./el-col-5zuQygKR.js";import{E as ee}from"./el-checkbox-tmnL_nsd.js";import{E as ae,a as se}from"./el-form-item-FIaXIskw.js";import{E as le}from"./el-button-oUORhmZJ.js";import{E as oe}from"./el-input-_eigv4Cy.js";import{_ as re}from"./_plugin-vue_export-helper-igkeBL2H.js";import"./el-message-1yConRSO.js";import"./error-tBjRQryL.js";import"./isEqual-UMwJcsko.js";import"./castArray-z_KLEY04.js";import"./_baseClone-vYhGUjR4.js";const te=z({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:R}}),ne={click:u=>u instanceof MouseEvent},ue=["href"],ie=M({name:"ElLink"}),de=M({...ie,props:te,emits:ne,setup(u,{emit:p}){const n=u,e=T("link"),v=F(()=>[e.b(),e.m(n.type),e.is("disabled",n.disabled),e.is("underline",n.underline&&!n.disabled)]);function g(o){n.disabled||p("click",o)}return(o,S)=>(d(),I("a",{class:h(i(v)),href:o.disabled||!o.href?void 0:o.href,onClick:g},[o.icon?(d(),_(i(A),{key:0},{default:s(()=>[(d(),_(j(o.icon)))]),_:1})):y("v-if",!0),o.$slots.default?(d(),I("span",{key:1,class:h(i(e).e("inner"))},[$(o.$slots,"default")],2)):y("v-if",!0),o.$slots.icon?$(o.$slots,"icon",{key:2}):y("v-if",!0)],10,ue))}});var pe=D(de,[["__file","/home/runner/work/element-plus/element-plus/packages/components/link/src/link.vue"]]);const me=K(pe),L=u=>(W("data-v-2185751a"),u=u(),X(),u),fe=L(()=>E("h1",null,"注册",-1)),ce=L(()=>E("h1",null,"登录",-1)),_e={class:"flex"},ve={__name:"LoginPage",setup(u){const p=b(),n=b(!1),e=b({username:"",password:"",repassword:"",rememberMe:!1}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,12}$/,message:"密码须是6~12位的非空字符",trigger:"blur"}],repassword:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,12}$/,message:"密码须是6~12位的非空字符",trigger:"blur"},{validator:(w,l,f)=>{l!==e.value.password?f(new Error("两次输入密码不一致")):f()},trigger:"blur"}]},g=async()=>{await p.value.validate(),await O(e.value),U.success("注册成功"),n.value=!1},o=G(),S=H(),N=async()=>{await p.value.validate(),e.value.rememberMe?(localStorage.setItem("username",e.value.username),localStorage.setItem("password",e.value.password)):(localStorage.removeItem("username"),localStorage.removeItem("password"));const w=await Q(e.value);o.setToken(w.data.token),o.setUserUsername(e.value.username),U.success("登录成功"),S.push("/")};return J(n,()=>{e.value={username:"",password:"",repassword:"",identity:""}}),(()=>{e.value.username=localStorage.getItem("username")||"",e.value.password=localStorage.getItem("password")||"",e.value.rememberMe=!!e.value.username})(),(w,l)=>{const f=Z,t=ae,c=oe,x=le,k=me,C=se,P=ee,q=Y;return d(),_(q,{class:"login-page"},{default:s(()=>[a(f,{span:12,class:"bg"}),a(f,{span:6,offset:3,class:"form"},{default:s(()=>[n.value?(d(),_(C,{key:0,model:e.value,rules:v,ref_key:"form",ref:p,size:"large",autocomplete:"off"},{default:s(()=>[a(t,null,{default:s(()=>[fe]),_:1}),a(t,{prop:"username"},{default:s(()=>[a(c,{modelValue:e.value.username,"onUpdate:modelValue":l[0]||(l[0]=r=>e.value.username=r),"prefix-icon":i(B),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),a(t,{prop:"password"},{default:s(()=>[a(c,{modelValue:e.value.password,"onUpdate:modelValue":l[1]||(l[1]=r=>e.value.password=r),"prefix-icon":i(V),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),a(t,{prop:"repassword"},{default:s(()=>[a(c,{modelValue:e.value.repassword,"onUpdate:modelValue":l[2]||(l[2]=r=>e.value.repassword=r),"prefix-icon":i(V),type:"password",placeholder:"请输入再次密码"},null,8,["modelValue","prefix-icon"])]),_:1}),a(t,null,{default:s(()=>[a(x,{onClick:g,class:"button",type:"primary","auto-insert-space":""},{default:s(()=>[m(" 注册 ")]),_:1})]),_:1}),a(t,{class:"flex"},{default:s(()=>[a(k,{type:"info",underline:!1,onClick:l[3]||(l[3]=r=>n.value=!1)},{default:s(()=>[m(" ← 返回 ")]),_:1})]),_:1})]),_:1},8,["model"])):(d(),_(C,{key:1,model:e.value,rules:v,ref_key:"form",ref:p,size:"large",autocomplete:"off"},{default:s(()=>[a(t,null,{default:s(()=>[ce]),_:1}),a(t,{prop:"username"},{default:s(()=>[a(c,{modelValue:e.value.username,"onUpdate:modelValue":l[4]||(l[4]=r=>e.value.username=r),"prefix-icon":i(B),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),a(t,{prop:"password"},{default:s(()=>[a(c,{modelValue:e.value.password,"onUpdate:modelValue":l[5]||(l[5]=r=>e.value.password=r),name:"password","prefix-icon":i(V),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),a(t,{class:"flex"},{default:s(()=>[E("div",_e,[a(P,{modelValue:e.value.rememberMe,"onUpdate:modelValue":l[6]||(l[6]=r=>e.value.rememberMe=r)},{default:s(()=>[m("记住我")]),_:1},8,["modelValue"]),a(k,{type:"primary",underline:!1},{default:s(()=>[m("忘记密码？")]),_:1})])]),_:1}),a(t,null,{default:s(()=>[a(x,{onClick:N,class:"button",type:"primary","auto-insert-space":""},{default:s(()=>[m("登录")]),_:1})]),_:1}),a(t,{class:"flex"},{default:s(()=>[a(k,{type:"info",underline:!1,onClick:l[7]||(l[7]=r=>n.value=!0)},{default:s(()=>[m(" 注册 → ")]),_:1})]),_:1})]),_:1},8,["model"]))]),_:1})]),_:1})}}},Ue=re(ve,[["__scopeId","data-v-2185751a"]]);export{Ue as default};
