import{b as T,i as D,d as M,u as j,c as A,o as i,a as E,e as _,w as a,r as K,f as d,E as O,g as k,n as h,h as $,_ as G,j as H,k as b,l as J,m as Q,p as W,q as l,s as X,F as Y,t as m,v as S,x as Z,y as U,z as ee,A as B,B as V,C as le,D as ae}from"./index-UqSCx6b_.js";import{E as se,a as oe}from"./el-col-JRKTydOI.js";import{E as te,a as re,b as ne}from"./el-select-l8gXjAhq.js";import{E as ue,a as de}from"./el-form-item-QXEwg2Sk.js";import{_ as ie,E as pe}from"./_plugin-vue_export-helper-nTWoGSoG.js";import{E as me}from"./el-input-fGeuu7OZ.js";import"./el-popper-AImZMm5V.js";import"./el-message-utGhAwQe.js";import"./error-tBjRQryL.js";import"./isEqual-RrGDshqa.js";const fe=T({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:D}}),ce={click:u=>u instanceof MouseEvent},_e=["href"],ve=M({name:"ElLink"}),ge=M({...ve,props:fe,emits:ce,setup(u,{emit:p}){const n=u,e=j("link"),v=A(()=>[e.b(),e.m(n.type),e.is("disabled",n.disabled),e.is("underline",n.underline&&!n.disabled)]);function g(t){n.disabled||p("click",t)}return(t,x)=>(i(),E("a",{class:h(d(v)),href:t.disabled||!t.href?void 0:t.href,onClick:g},[t.icon?(i(),_(d(O),{key:0},{default:a(()=>[(i(),_(K(t.icon)))]),_:1})):k("v-if",!0),t.$slots.default?(i(),E("span",{key:1,class:h(d(e).e("inner"))},[$(t.$slots,"default")],2)):k("v-if",!0),t.$slots.icon?$(t.$slots,"icon",{key:2}):k("v-if",!0)],10,_e))}});var we=G(ge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/link/src/link.vue"]]);const ye=H(we),L=u=>(le("data-v-4deb9d03"),u=u(),ae(),u),ke=L(()=>S("h1",null,"注册",-1)),be=L(()=>S("h1",null,"登录",-1)),Ve={class:"flex"},Ee={__name:"LoginPage",setup(u){const p=b(),n=b(!1),e=b({username:"",password:"",repassword:"",identity:"",rememberMe:!1}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,12}$/,message:"密码须是6~12位的非空字符",trigger:"blur"}],repassword:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,12}$/,message:"密码须是6~12位的非空字符",trigger:"blur"},{validator:(w,s,f)=>{s!==e.value.password?f(new Error("两次输入密码不一致")):f()},trigger:"blur"}]},g=async()=>{await p.value.validate(),await Z(e.value),U.success("注册成功"),n.value=!1},t=J(),x=Q(),N=async()=>{await p.value.validate(),e.value.rememberMe?(localStorage.setItem("username",e.value.username),localStorage.setItem("password",e.value.password)):(localStorage.removeItem("username"),localStorage.removeItem("password"));const w=await ee(e.value);t.setToken(w.data.token),t.setUserUsername(e.value.username),U.success("登录成功"),x.push("/")};W(n,()=>{e.value={username:"",password:"",repassword:"",identity:""}});const P=[{value:"user",label:"用户"},{value:"administrator",label:"管理员"}];return(()=>{e.value.username=localStorage.getItem("username")||"",e.value.password=localStorage.getItem("password")||"",e.value.rememberMe=!!e.value.username})(),(w,s)=>{const f=oe,r=ue,c=me,q=ne,z=te,C=pe,y=ye,I=de,F=re,R=se;return i(),_(R,{class:"login-page"},{default:a(()=>[l(f,{span:12,class:"bg"}),l(f,{span:6,offset:3,class:"form"},{default:a(()=>[n.value?(i(),_(I,{key:0,model:e.value,rules:v,ref_key:"form",ref:p,size:"large",autocomplete:"off"},{default:a(()=>[l(r,null,{default:a(()=>[ke]),_:1}),l(r,{prop:"username"},{default:a(()=>[l(c,{modelValue:e.value.username,"onUpdate:modelValue":s[0]||(s[0]=o=>e.value.username=o),"prefix-icon":d(B),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),l(r,{prop:"password"},{default:a(()=>[l(c,{modelValue:e.value.password,"onUpdate:modelValue":s[1]||(s[1]=o=>e.value.password=o),"prefix-icon":d(V),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),l(r,{prop:"repassword"},{default:a(()=>[l(c,{modelValue:e.value.repassword,"onUpdate:modelValue":s[2]||(s[2]=o=>e.value.repassword=o),"prefix-icon":d(V),type:"password",placeholder:"请输入再次密码"},null,8,["modelValue","prefix-icon"])]),_:1}),l(r,null,{default:a(()=>[l(z,{modelValue:e.value.identity,"onUpdate:modelValue":s[3]||(s[3]=o=>e.value.identity=o),clearable:"",placeholder:"请选择注册的身份",style:{width:"100%"}},{default:a(()=>[(i(),E(Y,null,X(P,o=>l(q,{key:o.value,label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(r,null,{default:a(()=>[l(C,{onClick:g,class:"button",type:"primary","auto-insert-space":""},{default:a(()=>[m(" 注册 ")]),_:1})]),_:1}),l(r,{class:"flex"},{default:a(()=>[l(y,{type:"info",underline:!1,onClick:s[4]||(s[4]=o=>n.value=!1)},{default:a(()=>[m(" ← 返回 ")]),_:1})]),_:1})]),_:1},8,["model"])):(i(),_(I,{key:1,model:e.value,rules:v,ref_key:"form",ref:p,size:"large",autocomplete:"off"},{default:a(()=>[l(r,null,{default:a(()=>[be]),_:1}),l(r,{prop:"username"},{default:a(()=>[l(c,{modelValue:e.value.username,"onUpdate:modelValue":s[5]||(s[5]=o=>e.value.username=o),"prefix-icon":d(B),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),l(r,{prop:"password"},{default:a(()=>[l(c,{modelValue:e.value.password,"onUpdate:modelValue":s[6]||(s[6]=o=>e.value.password=o),name:"password","prefix-icon":d(V),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),l(r,{class:"flex"},{default:a(()=>[S("div",Ve,[l(F,{modelValue:e.value.rememberMe,"onUpdate:modelValue":s[7]||(s[7]=o=>e.value.rememberMe=o)},{default:a(()=>[m("记住我")]),_:1},8,["modelValue"]),l(y,{type:"primary",underline:!1},{default:a(()=>[m("忘记密码？")]),_:1})])]),_:1}),l(r,null,{default:a(()=>[l(C,{onClick:N,class:"button",type:"primary","auto-insert-space":""},{default:a(()=>[m("登录")]),_:1})]),_:1}),l(r,{class:"flex"},{default:a(()=>[l(y,{type:"info",underline:!1,onClick:s[8]||(s[8]=o=>n.value=!0)},{default:a(()=>[m(" 注册 → ")]),_:1})]),_:1})]),_:1},8,["model"]))]),_:1})]),_:1})}}},Pe=ie(Ee,[["__scopeId","data-v-4deb9d03"]]);export{Pe as default};
